{"remainingRequest":"/Users/jameshuntercarter/htdocs/generator-new/node_modules/babel-loader/lib/index.js??ref--1-1!/Users/jameshuntercarter/htdocs/generator-new/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jameshuntercarter/htdocs/generator-new/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jameshuntercarter/htdocs/generator-new/src/pages/Services.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jameshuntercarter/htdocs/generator-new/src/pages/Services.vue","mtime":1585648039023},{"path":"/Users/jameshuntercarter/htdocs/generator-new/node_modules/cache-loader/dist/cjs.js","mtime":1584835208383},{"path":"/Users/jameshuntercarter/htdocs/generator-new/node_modules/babel-loader/lib/index.js","mtime":1584835208396},{"path":"/Users/jameshuntercarter/htdocs/generator-new/node_modules/cache-loader/dist/cjs.js","mtime":1584835208383},{"path":"/Users/jameshuntercarter/htdocs/generator-new/node_modules/vue-loader/lib/index.js","mtime":1584835209127}],"contextDependencies":[],"result":["import \"core-js/modules/es.array.filter\";\nimport \"core-js/modules/es.array.includes\";\nimport \"core-js/modules/es.string.includes\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/jameshuntercarter/htdocs/generator-new/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { fetch } from 'gridsome';\nexport default {\n  data: function data() {\n    return {\n      collection: null,\n      offerings: null,\n      productsPage: null\n    };\n  },\n  metaInfo: {\n    title: \"All Products\"\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _this.$fetch('/services');\n\n            case 3:\n              _this.productsPage = _context.sent;\n              _context.next = 9;\n              break;\n\n            case 6:\n              _context.prev = 6;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 6]]);\n    }))();\n  },\n  methods: {\n    collectionHasProducts: function collectionHasProducts(collection) {\n      //console.log(collection.node.offerings);\n      if (this.productsPage != null) {\n        var allProducts = this.productsPage.data.products.edges;\n        var results = allProducts.filter(function (product) {\n          return product.node.type == 'service' && collection.node.offerings.includes(product.node.id);\n        });\n\n        if (results.length > 0) {\n          return true;\n          console.log(collection.id);\n          console.log(true);\n        } else {\n          return false;\n          console.log(false);\n        }\n      }\n    },\n    displayOrHide: function displayOrHide(input) {\n      if (this.collection === null) {\n        return true;\n      } else {\n        if (this.offerings.includes(input)) {\n          return true;\n        } else {\n          return false;\n        }\n      }\n    },\n    filterByCollection: function filterByCollection(input) {\n      console.log(input);\n      this.collection = input.collection;\n      this.offerings = input.offerings; //alert(input.offerings)\n    }\n  }\n};",{"version":3,"sources":["Services.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgIA,SAAA,KAAA,QAAA,UAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,IADA;AAEA,MAAA,SAAA,EAAA,IAFA;AAGA,MAAA,YAAA,EAAA;AAHA,KAAA;AAKA,GAPA;AAQA,EAAA,QAAA,EAAA;AACA,IAAA,KAAA,EAAA;AADA,GARA;AAWA,EAAA,OAXA,qBAWA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEA,KAAA,CAAA,MAAA,CAAA,WAAA,CAFA;;AAAA;AAEA,cAAA,KAAA,CAAA,YAFA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAIA,cAAA,OAAA,CAAA,GAAA;;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA,GAjBA;AAkBA,EAAA,OAAA,EAAA;AACA,IAAA,qBADA,iCACA,UADA,EACA;AAEA;AACA,UAAA,KAAA,YAAA,IAAA,IAAA,EAAA;AAEA,YAAA,WAAA,GAAA,KAAA,YAAA,CAAA,IAAA,CAAA,QAAA,CAAA,KAAA;AAEA,YAAA,OAAA,GAAA,WAAA,CAAA,MAAA,CAAA,UAAA,OAAA;AAAA,iBAAA,OAAA,CAAA,IAAA,CAAA,IAAA,IAAA,SAAA,IAAA,UAAA,CAAA,IAAA,CAAA,SAAA,CAAA,QAAA,CAAA,OAAA,CAAA,IAAA,CAAA,EAAA,CAAA;AAAA,SAAA,CAAA;;AAIA,YAAA,OAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,iBAAA,IAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,UAAA,CAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,SAJA,MAIA;AACA,iBAAA,KAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA;AACA;AACA,KArBA;AAsBA,IAAA,aAtBA,yBAsBA,KAtBA,EAsBA;AACA,UAAA,KAAA,UAAA,KAAA,IAAA,EAAA;AACA,eAAA,IAAA;AACA,OAFA,MAEA;AACA,YAAA,KAAA,SAAA,CAAA,QAAA,CAAA,KAAA,CAAA,EAAA;AACA,iBAAA,IAAA;AACA,SAFA,MAEA;AACA,iBAAA,KAAA;AACA;AACA;AACA,KAhCA;AAkCA,IAAA,kBAlCA,8BAkCA,KAlCA,EAkCA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,WAAA,UAAA,GAAA,KAAA,CAAA,UAAA;AACA,WAAA,SAAA,GAAA,KAAA,CAAA,SAAA,CAHA,CAIA;AACA;AAvCA;AAlBA,CAAA","sourcesContent":["<template>\n  <Layout :show-logo=\"false\">\n    <div class=\"container\">\n      <div class=\"row w-100 text-center mx-auto\">\n        <h2\n          class=\"justify-content-center text-center w-100 text-weight-200 mb-3 mt-3 pt-3 mr-3\"\n        >Services</h2>\n      </div>\n    </div>\n\n    <!-- Recent posts -->\n    <div class=\"posts\" style=\"min-height:400px;\">\n      <div class=\"container px-3\">\n        <b-card-group\n          deck\n          class=\"mb-3 mt-2 justify-content-center\"\n          v-for=\"collection, index in $page.collections.edges\"\n          v-bind:key=\"collection.node.id\"\n          v-if=\"collection.node.featured == true  && collection.node.offerings.length > 0 && collectionHasProducts(collection)\"\n        >\n          <h3\n            class=\"w-100 opacity-70 text-center text-primary mb-5 mt-2 mr-3\"\n          >{{ collection.node.title }}</h3>\n          <div\n            v-for=\"edge, index in $page.products.edges\"\n            v-bind:key=\"edge.node.id\"\n            v-if=\"collectionHasProducts(collection) && collection.node.offerings.includes(edge.node.id) && edge.node.featured == true && displayOrHide(edge.node.id) === true\"\n            class=\"col-md-3 px-0 pr-md-2 mb-4\"\n          >\n            <div\n              class=\"card raised border-0 mb-1 pull-left mx-0 px-0 h-100 mr-md-3 px-0 pb-3 m-0\"\n              :key=\"edge.node.id\"\n              :post=\"edge.node\"\n              v-if=\"displayOrHide(edge.node.slug) === true\"\n            >\n              <div\n                class=\"card-header\"\n                style=\"height:250px;background:none !important; border-radius:5px !important; overflow:hidden !important;\"\n              >\n                <div\n                  style=\"width:100%;height:250px;                              \n                    position: absolute;\n                    top: 0px;\n                    right: 0px;                \n                    background-size:cover;\n                    background-position:center center;\n                    border-radius:5px 5px 0px 0px \"\n                  :style=\"{ backgroundImage: `url('${edge.node.cover_image}')` }\"\n                ></div>\n              </div>\n              <div class=\"card-body p-0\">\n                <b-card-text class=\"pt-3 px-3\" style=\"line-height:25px;\">\n                  <h5>{{ edge.node.title }}</h5>\n                </b-card-text>\n                <b-card-text class=\"pb-3 px-3 mb-4\" style=\"line-height:28px;\">\n                  {{ edge.node.description.substr(0, 120) }}\n                  <span style=\"opacity:.5;\">...</span>\n                </b-card-text>\n                <b-button\n                  :href=\"'/buy/' + edge.node.slug\"\n                  class=\"d-block\"\n                  variant=\"outline-primary\"\n                  style=\"position:absolute !important;bottom:15px;left:15px;width:calc(100% - 30px);\"\n                >\n                  More Info\n                  <span style=\"opacity:0.5;\">â†’</span>\n                </b-button>\n              </div>\n            </div>\n          </div>\n        </b-card-group>\n      </div>\n    </div>\n  </Layout>\n</template>\n\n<page-query>\nquery {\n  products: allOffering(sort: [{ by: \"price\" }, { by: \"boost\" }] order: DESC, filter: { featured: { eq: true }, type: { eq: \"service\"} }) {\n    edges {\n      node {\n        id\n        title\n        slug\n        date (format: \"D. MMMM YYYY\")\n        timeToRead\n        published\n        featured\n        boost\n        type\n        description\n        cover_image\n        path\n        tags {\n          id\n          title\n          path\n        }\n      }\n    }\n  }\n  collections: allCollection( sortBy: \"boost\", order: DESC, filter: { published: { eq: true }} ) {\n    edges {\n      node {\n        id\n        title\n        slug\n        boost\n        date (format: \"D. MMMM YYYY\")\n        timeToRead\n        featured\n        published\n        description\n        cover_image\n        path\n        tags {\n          id\n          title\n          path\n        }\n        offerings\n      }\n    }\n  }\n}\n</page-query>\n\n<script>\nimport { fetch } from 'gridsome';\n\nexport default {\n  data() {\n    return {\n      collection: null,\n      offerings: null,\n      productsPage: null\n    };\n  },\n  metaInfo: {\n    title: \"All Products\"\n  },\n  async mounted() {\n    try {\n      this.productsPage = await this.$fetch('/services');\n    } catch (error) {\n      console.log(error);\n    }\n  },\n  methods: {\n    collectionHasProducts(collection){ \n      \n      //console.log(collection.node.offerings);\n      if(this.productsPage != null){\n      \n      var allProducts = this.productsPage.data.products.edges;\n        \n      var results = allProducts.filter(product => product.node.type == 'service' && collection.node.offerings.includes(product.node.id));\n      \n      \n\n      if(results.length > 0 ){        \n        return true;\n        console.log (collection.id);\n        console.log(true);\n      } else {\n      return false;\n        console.log(false);\n       }\n      }\n    },\n    displayOrHide(input) {\n      if (this.collection === null) {\n        return true;\n      } else {\n        if (this.offerings.includes(input)) {\n          return true;\n        } else {\n          return false;\n        }\n      }\n    },\n\n    filterByCollection(input) {\n      console.log(input);\n      this.collection = input.collection;\n      this.offerings = input.offerings;\n      //alert(input.offerings)\n    }\n  }\n};\n</script>"],"sourceRoot":"src/pages"}]}